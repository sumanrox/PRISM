/* Basic resets and Carbon/Tailwind blending */
:root{
    --carbon-blue:#0f62fe;
    --bg-primary:#f3f4f6;
    --bg-secondary:#ffffff;
    --bg-tertiary:#f9fafb;
    --text-primary:#111827;
    --text-secondary:#374151;
    --text-tertiary:#6b7280;
    --border-color:#e5e7eb;
    --border-focus:rgba(15,98,254,0.1);
  --header-from:#2563eb;
  --header-to:#4f46e5;
  --form-border:#2563eb;
  --pdf-font-family:'Inter', serif;
}

body.dark-mode{
  --bg-primary:#161616;
  --bg-secondary:#262626;
  --bg-tertiary:#393939;
  --text-primary:#f4f4f4;
  --text-secondary:#c6c6c6;
  --text-tertiary:#8d8d8d;
  --border-color:#393939;
  --border-focus:rgba(15,98,254,0.3);
  --header-from:#0f62fe;
  --header-to:#0353e9;
  --form-border:#0f62fe;
}

html,body,#app{height:100%}
body{
  font-family: var(--pdf-font-family);
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  background-attachment: fixed;
  color:var(--text-primary);
  transition:background 0.3s, color 0.3s;
  position: relative;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(252, 163, 17, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 40% 20%, rgba(15, 98, 254, 0.2) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
  opacity: 0.6;
}

body.dark-mode {
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  background-attachment: fixed;
}

body.dark-mode::before {
  background: 
    radial-gradient(circle at 20% 50%, rgba(15, 98, 254, 0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(252, 163, 17, 0.08) 0%, transparent 50%),
    radial-gradient(circle at 40% 20%, rgba(120, 119, 198, 0.12) 0%, transparent 50%);
  opacity: 0.5;
}

/* Ensure content is above the background overlay */
.app-header, main, aside {
  position: relative;
  z-index: 1;
}

/* Force flat design: no border-radius anywhere */
*{border-radius:0 !important}

/* Utility classes */
.cursor-move{cursor:move !important}

/* Form builder border */
#formColumn{border:2px solid var(--form-border) !important;background:var(--bg-secondary) !important;transition:border-color 0.3s, background 0.3s}

/* Header gradient */
.app-header .bg-gradient-to-r{background:linear-gradient(to right, var(--header-from), var(--header-to)) !important;transition:background 0.3s}

/* Modern sleek scrollbar */
*::-webkit-scrollbar{width:8px;height:8px}
*::-webkit-scrollbar-track{background:var(--bg-tertiary)}
*::-webkit-scrollbar-thumb{background:var(--text-tertiary);transition:background 0.2s}
*::-webkit-scrollbar-thumb:hover{background:var(--text-secondary)}
/* Firefox scrollbar */
*{scrollbar-width:thin;scrollbar-color:var(--text-tertiary) var(--bg-tertiary)}

/* Header */
.app-header{box-shadow:none}

/* Inputs */
.input-field{width:100%;padding:.5rem;border:1px solid var(--border-color);background:var(--bg-secondary);color:var(--text-primary);transition:border-color 0.15s, background 0.3s, color 0.3s}
.input-field:focus{outline:none;border-color:var(--carbon-blue);box-shadow:0 0 0 2px var(--border-focus)}
.input-field:disabled{background:var(--bg-tertiary);cursor:not-allowed}

/* File input styling */
.file-input-label{display:inline-flex;align-items:center;gap:0.5rem;padding:.5rem .75rem;border:1px solid var(--border-color);background:var(--bg-secondary);color:var(--text-primary);cursor:pointer;transition:all 0.15s;width:100%}
.file-input-label:hover{background:var(--bg-tertiary);border-color:var(--carbon-blue)}
.file-input-label i{color:var(--carbon-blue)}
.file-input{display:none}

/* Text areas */
textarea.input-field{background:var(--bg-secondary);color:var(--text-primary)}

/* Buttons */
.icon-btn{background:transparent;border:none;padding:.25rem;color:var(--text-secondary);cursor:pointer;transition:color 0.15s}
.icon-btn:hover{color:var(--text-primary)}
.icon-btn:focus{outline:2px solid rgba(15,98,254,0.3);outline-offset:2px}
.btn-primary{background:var(--carbon-blue);color:white;padding:.5rem .75rem;border:1px solid var(--carbon-blue);cursor:pointer;transition:background 0.15s}
.btn-primary:hover{background:#0353e9}
.btn-primary:focus{outline:2px solid rgba(15,98,254,0.3);outline-offset:2px}
.btn-secondary{background:var(--bg-tertiary);color:var(--text-primary);padding:.45rem .7rem;border:1px solid var(--border-color);cursor:pointer;transition:background 0.15s, color 0.3s}
.btn-secondary:hover{background:var(--border-color)}
.btn-secondary:focus{outline:2px solid rgba(15,98,254,0.3);outline-offset:2px}
.btn-ghost{background:transparent;border:1px solid var(--border-color);padding:.45rem .7rem;cursor:pointer;transition:all 0.15s;color:var(--text-primary)}
.btn-ghost:hover{background:var(--bg-tertiary)}
.btn-ghost:focus{outline:2px solid rgba(15,98,254,0.3);outline-offset:2px}
.btn-danger{background:#b91c1c;color:white;padding:.45rem .7rem;cursor:pointer;transition:background 0.15s}
.btn-danger:hover{background:#991b1b}
.btn-danger:focus{outline:2px solid rgba(220,38,38,0.3);outline-offset:2px}

/* Monospace for code areas */
.monospace{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Courier New', monospace}

/* Floating Dock */
#floatingDock{width:56px;position:fixed;top:50%;transform:translateY(-50%);left:calc(50% + 512px + 0.5rem);z-index:50;background:var(--bg-secondary);border:1px solid var(--border-color);transition:background 0.3s, border-color 0.3s}
.dock-btn{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;color:var(--text-secondary);cursor:pointer;transition:all 0.2s;position:relative}
.dock-btn:hover{background:var(--bg-tertiary);color:var(--carbon-blue)}
.dock-btn i{font-size:1.25rem}
.dock-btn:hover::after{content:attr(title);position:absolute;left:-10px;transform:translateX(-100%);background:#1a1a1a;color:white;padding:0.375rem 0.75rem;font-size:0.75rem;white-space:nowrap;pointer-events:none;z-index:100}

/* Dock button groups with dropdowns */
.dock-btn-group{position:relative}
.dock-dropdown{position:absolute;left:-10px;transform:translateX(-100%);background:var(--bg-secondary);border:1px solid var(--border-color);min-width:200px;display:none;flex-direction:column;z-index:110;box-shadow:0 4px 12px rgba(0,0,0,0.15)}
.dock-dropdown.show{display:flex}
.dock-dropdown-item{width:100%;padding:0.75rem 1rem;background:transparent;border:none;color:var(--text-primary);text-align:left;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;gap:0.5rem;font-size:0.875rem}
.dock-dropdown-item:hover{background:var(--bg-tertiary);color:var(--carbon-blue)}
.dock-dropdown-item i{font-size:1rem}

@media (max-width: 1280px){
  #floatingDock{left:auto;right:1rem}
}

@media (max-width: 768px){
  #floatingDock{
    top:auto;
    bottom:0;
    left:1rem;
    right:1rem;
    width:auto;
    height:auto;
    transform:none;
    display:flex !important;
    flex-direction:row;
    justify-content:space-around;
    align-items:center;
    padding:0.75rem 0.5rem;
    border:1px solid var(--border-color);
    box-shadow:0 -2px 10px rgba(0,0,0,0.1);
    z-index:100;
    margin-bottom:1rem;
  }
  .dock-btn{
    width:44px;
    height:44px;
  }
  .dock-btn:hover::after{
    display:none;
  }
  .border-t{display:none}
  .dock-dropdown{left:50%;bottom:100%;top:auto;transform:translateX(-50%);margin-bottom:0.5rem}
  main{
    padding-bottom:6rem !important;
  }
}

/* Collapsible sections */
.collapsible-section h2{user-select:none;color:var(--text-primary);cursor:pointer}
.collapsible-section h2 i{transition:transform 0.2s}
.collapsible-section.collapsed h2 i{transform:rotate(-90deg)}
.collapsible-section.collapsed .section-content{display:none}
.collapsible-section{border-color:var(--border-color) !important}

/* Validation messages */
.validation-message{font-size:0.75rem}

/* Labels and text */
label .text-xs{color:var(--text-secondary) !important}
.text-gray-600,.text-gray-700,.text-gray-500{color:var(--text-secondary) !important}

/* Drop area */
#dropArea{cursor:pointer}

/* Modal */
#settingsModal, #draftsModal, #customModal, #templatesModal, #docsModal{display:flex;justify-content:center;align-items:center}
#settingsModal.hidden, #draftsModal.hidden, #customModal.hidden, #templatesModal.hidden, #docsModal.hidden{display:none}

.modal-content{background:var(--bg-secondary);border-color:var(--border-color) !important;transition:background 0.3s}
.modal-title{color:var(--text-primary)}
.modal-content .text-sm{color:var(--text-secondary) !important}
.modal-content label span{color:var(--text-primary)}

/* Draft list items */
.draft-item{padding:.5rem;border:1px solid var(--border-color);cursor:pointer;background:var(--bg-secondary);color:var(--text-primary);transition:background 0.2s}
.draft-item:hover{background:var(--bg-tertiary)}

/* Template cards */
.template-card{padding:.75rem;border:1px solid var(--border-color);cursor:pointer;background:var(--bg-secondary);color:var(--text-primary);transition:background 0.2s}
.template-card:hover{background:var(--bg-tertiary)}

/* Prose styles for preview - keep minimal (avoid rounded images) */
.prose img{border:1px solid #e5e7eb}

/* Layout switching */
#mainGrid.layout-reversed{grid-template-rows:auto auto}
#mainGrid.layout-reversed #previewColumn{order:-1}
#mainGrid.layout-reversed #formColumn{order:1}

/* Responsive adjustments */
@media (max-width: 1023px){
  .app-header h1{font-size:1rem}
  .app-header .icon-btn{font-size:1.25rem}
}

@media (max-width: 640px){
  #thumbs{grid-template-columns: repeat(2, 1fr)}
  .btn-primary, .btn-secondary, .btn-ghost{font-size:0.875rem;padding:.375rem .5rem}
}

/* Documentation viewer styles */
.doc-tab-btn{background:transparent;border:none;color:var(--text-secondary);cursor:pointer;transition:all 0.2s;border-bottom:2px solid transparent}
.doc-tab-btn:hover{color:var(--carbon-blue);background:var(--bg-tertiary)}
.doc-tab-btn.active{color:var(--carbon-blue);border-bottom-color:var(--carbon-blue);font-weight:600}
#docContent{line-height:1.8}
#docContent h1{font-size:1.75rem;font-weight:700;margin:1.5rem 0 1rem;color:var(--text-primary);border-bottom:2px solid var(--border-color);padding-bottom:0.5rem}
#docContent h2{font-size:1.35rem;font-weight:600;margin:1.25rem 0 0.75rem;color:var(--text-primary)}
#docContent h3{font-size:1.1rem;font-weight:600;margin:1rem 0 0.5rem;color:var(--text-primary)}
#docContent h4{font-size:1rem;font-weight:600;margin:0.75rem 0 0.5rem;color:var(--text-primary)}
#docContent p{margin:0.75rem 0;color:var(--text-primary)}
#docContent ul,#docContent ol{margin:0.75rem 0;padding-left:1.5rem;color:var(--text-primary)}
#docContent li{margin:0.25rem 0}
#docContent code{background:var(--bg-tertiary);padding:0.15rem 0.4rem;font-size:0.9em;font-family:monospace;color:var(--carbon-blue)}
#docContent pre{background:var(--bg-tertiary);padding:1rem;overflow-x:auto;margin:0.75rem 0;border:1px solid var(--border-color)}
#docContent pre code{background:none;padding:0;color:var(--text-primary)}
#docContent a{color:var(--carbon-blue);text-decoration:underline}
#docContent a:hover{color:#0353e9}
#docContent strong{font-weight:600;color:var(--text-primary)}
#docContent hr{border:none;border-top:1px solid var(--border-color);margin:1.5rem 0}
#docContent blockquote{border-left:4px solid var(--carbon-blue);padding-left:1rem;margin:1rem 0;color:var(--text-secondary);font-style:italic}

@media print{
  header, .btn-primary, .btn-secondary, .btn-ghost, #settingsModal, #draftsModal, #autosaveIndicator{display:none !important}
  body{background:white}
  #formColumn{display:none}
  #previewColumn{border:none;padding:0}
}
